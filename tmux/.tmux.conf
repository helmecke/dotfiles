# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -ga update-environment 'KITTY_LISTEN_ON'

setw -g mode-keys vi
set -g status-keys emacs

# Setup 'v' to begin selection as in Vim
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace xclip -in -selection clipboard"
bind p paste-buffer

# use vim-like keys windows
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 2
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 2

bind ^ last-window

# switch window
bind -r [ previous-window
bind -r ] next-window
# switch session
bind -r \{ switch-client -p
bind -r \} switch-client -n

bind c copy-mode
# use pwd for new windows
bind n new-window -c "#{pane_current_path}"
bind N command-prompt -p "command:"  "new-window -c '#{pane_current_path}' '%%'"
bind s split-window -v -c "#{pane_current_path}"
bind S command-prompt -p "command:"  "split-window -v -c '#{pane_current_path}' '%%'"
bind v split-window -h -c "#{pane_current_path}"
bind V command-prompt -p "command:"  "split-window -h -c '#{pane_current_path}' '%%'"

# source tmux config
bind r source-file ~/.tmux.conf \; display "~/.tmux.conf sourced."

set -g status-right ''
set -g status-style "bg=black"
set -g mode-style "bg=colour10,fg=black"
set -g message-style "bg=colour8,fg=colour14"
setw -g window-status-current-style "bg=green,fg=black"

# only show status with multiple windows
# set -g status off
# set-hook -g window-linked "if -F '#{==:#{session_windows},1}' 'set -g status off' 'set -g status on'"
# set-hook -g window-unlinked "if -F '#{==:#{session_windows},1}' 'set -g status off' 'set -g status on'"

# Faster escape sequences (default is 500ms).
# This helps when exiting insert mode in Vim: http://superuser.com/a/252717/65504
set -sg escape-time 1
set -g mouse on
